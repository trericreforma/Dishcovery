<view class="container">
  <text class="label">Dish Name</text>
  <custom-input 
    placeholder="What are you cooking?" 
    bind:input="handleInput" 
  />

  <text class="label">Description</text>
  <custom-textarea 
    placeholder="Tell about your dish" 
    bind:input="handleInput" 
  />

  <text class="label">Preparation Time</text>
  <custom-slider
    label="Minutes"
    min="0"
    max="100"
    step="5"
    value="50"
    bind:change="handleSliderChange"
  />

  <text class="label">Calorie Content</text>
  <custom-slider
    label="kCal"
    min="0"
    max="500"
    step="5"
    value="50"
    bind:change="handleSliderChange"
  />

  <text class="label">Difficulty</text>
  <difficulty 
    selected="medium"
    bind:change="handleDifficultyChange" 
  />

  <text class="label">Ingredients</text>

  <block wx:if="{{selectedIngredients.length > 0}}">
    <view class="selected-ingredients">
      <block wx:for="{{selectedIngredients}}" wx:key="index">
        <view class="item-container">
          <view class="selected-item">
            <view class="info">
              <ingredient-image name="{{item.name}}" />
              <text class="item-name">{{item.name}} ({{item.unit}})</text>
            </view>

            <view class="quantity-controls">
              <button class="qty-btn" bindtap="decreaseQty" data-index="{{index}}">-</button>
              <text class="qty">{{item.quantity}}</text>
              <button class="qty-btn" bindtap="increaseQty" data-index="{{index}}">+</button>
            </view>
          </view>
          <button
            class="remove-btn"
            data-index="{{index}}"
            bindtap="removeIngredient"
          >✕</button>
        </view>
      </block>
    </view>
  </block>

  <custom-button 
    label="Add Ingredient" 
    type="primary" 
    bind:tap="openModal" 
  />

  <text class="label">Procedure</text>

  <block wx:for="{{steps}}" wx:key="index">
    <view class="step-row">
      <custom-textarea
        class="step-textarea"
        placeholder="Write step {{index + 1}}"
        value="{{item.text}}"
        bind:input="updateStep"
        data-index="{{index}}"
      />
      <button
        class="remove-btn"
        data-index="{{index}}"
        bindtap="removeStep"
      >✕</button>
    </view>
  </block>



  <custom-button 
    label="Add a step" 
    type="primary" 
    catchtap="addStep" 
  />


  <ingredients-modal 
    show="{{showIngredientModal}}" 
    bind:close="closeIngredientModal" 
    bind:add="handleAddIngredient" 
  />
</view>

<menu />
