<view class="lang-container">
  <view class="lang-toggle" bindtap="onToggleLang">
    <view class="lang-option {{currentLang === 'zh' ? 'active' : ''}}">中文</view>
    <view class="lang-option {{currentLang === 'en' ? 'active' : ''}}">EN</view>
    <view class="lang-slider {{currentLang}}"></view>
  </view>
</view>

<view class="container color-text">
  <view class="title-container">
    <view class="title-text">
      <text class="title-greeting">{{titleGreeting}}, User</text>
      <text class="title-greeting2">{{titleGreeting2}}</text>
    </view>
    <image class='user-avatar' src="https://randomuser.me/api/portraits/women/43.jpg"/>
  </view>
  
  <view class="search-box">
    <input
      class="search-input"
      placeholder="{{searchPlaceholder}}"
      bindinput="onSearchInput"
      value="{{search}}"
    />
    <image class="search-icon" src="https://cdn-icons-png.flaticon.com/512/622/622669.png" />
  </view>
</view>
<view class="category-section">
  <view class="category-list">
    <block wx:for="{{categories}}" wx:key="index">
      <view class="category-card {{index == 0 ? 'first-item' : ''}}" bindtap="onCategorySelect" data-category="{{item.name}}">
        <image class="category-icon" src="{{item.img}}"/>
        <text class="category-text">{{item.name}}</text>
      </view>
    </block>
  </view>
</view>

<view wx:if="{{!loading && (!recipes || recipes.length === 0)}}" class="no-results">
  <text class="no-results-title">No recipes found</text>
  <text class="no-results-text">Try adjusting your search or browse our categories to find something delicious!</text>
</view>

<view wx:if="{{loading}}" class="loading-spinner">
  <image src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f310.svg" class="spinner-img" />
</view>

<view class="container" wx:if="{{recipes && recipes.length > 0}}">
  <view class="recipe-list">
    <block wx:for="{{recipes}}" wx:key="index">
      <card
        img="{{item.image_url}}"
        title="{{item.name}}"
        desc="By Jhon Woo"
        bindtap="openModal" data-item="{{item}}"
      />
    </block>
  </view>
</view>



<recipe-modal visible="{{showModal}}" recipe="{{selectedRecipe}}" bind:close="onModalClose" />

<menu />